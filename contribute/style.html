<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="https://leanprover-community.github.io//css/lean.css" >
  <link rel="shortcut icon" href="https://leanprover-community.github.io//img/favicon.ico">
  <link rel="search" type="application/opensearchdescription+xml" title="mathlib docs" href="https://leanprover-community.github.io//opensearch.xml">
<link href="https://fonts.googleapis.com/css2?family=Merriweather&family=Open+Sans&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
    

	<script>
                function buildShortcutsForStructures(names) {
                        const o = {}
                        names.forEach(name => o[name] = `\\mathbb\{${name}\}`)
                        return o
                }
		MathJax = {
			  tex: {
                                  macros: {
                                          ...buildShortcutsForStructures(["R", "Q", "Z", "N", "C"]),
                                  },
				      inlineMath: [['$', '$'], ['\\(', '\\)']]
				    },
		};
	</script>
	<script type="text/javascript" id="MathJax-script" async
		  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
	</script>

	<title>Library Style Guidelines</title>
  </head>
  <body>
  <nav class="navbar navbar-expand-lg navbar-light bg-gradient-light d-md-none">
    <div class="d-flex flex-grow-1">
		<a class="navbar-brand" href="https://leanprover-community.github.io/index.html">Lean Community
    </a>
    </div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>

<div id="mainbox">

  <main>
	  
<h1 id="library-style-guidelines" class="markdown-heading">Library Style Guidelines <a class="hover-link" href="#library-style-guidelines">#</a></h1>
<p>Author: <a href="http://www.andrew.cmu.edu/user/avigad">Jeremy Avigad</a></p>
<p>In addition to the <a href="naming.html">naming conventions</a>,
files in the Lean library generally adhere to the following guidelines
and conventions. Having a uniform style makes it easier to browse the
library and read the contents, but these are meant to be guidelines
rather than rigid rules.</p>
<h3 id="variable-conventions" class="markdown-heading">Variable conventions <a class="hover-link" href="#variable-conventions">#</a></h3>
<ul>
<li><code>u</code>, <code>v</code>, <code>w</code>, ... for universes</li>
<li><code>Œ±</code>, <code>Œ≤</code>, <code>Œ≥</code>, ... for generic types</li>
<li><code>a</code>, <code>b</code>, <code>c</code>, ... for propositions</li>
<li><code>x</code>, <code>y</code>, <code>z</code>, ... for elements of a generic type</li>
<li><code>h</code>, <code>h‚ÇÅ</code>, ...     for assumptions</li>
<li><code>p</code>, <code>q</code>, <code>r</code>, ... for predicates and relations</li>
<li><code>s</code>, <code>t</code>, ...      for lists</li>
<li><code>s</code>, <code>t</code>, ...      for sets</li>
<li><code>m</code>, <code>n</code>, <code>k</code>, ... for natural numbers</li>
<li><code>i</code>, <code>j</code>, <code>k</code>, ... for integers</li>
</ul>
<p>Types with a mathematical content are expressed with the usual
mathematical notation, often with an upper case letter
(<code>G</code> for a group, <code>R</code> for a ring, <code>K</code> or <code>ùïú</code> for a field, <code>E</code> for a vector space, ...).
This convention is not followed in older files, where greek letters are used
for all types. Pull requests renaming type variables in these files are welcome.</p>
<h3 id="line-length" class="markdown-heading">Line length <a class="hover-link" href="#line-length">#</a></h3>
<p>Lines should not be longer than 100 characters. This makes files
easier to read, especially on a small screen or in a small window.</p>
<h3 id="header-and-imports" class="markdown-heading">Header and imports <a class="hover-link" href="#header-and-imports">#</a></h3>
<p>The file header should contain copyright information, a list of all
the authors who have made significant contributions to the file, and
a description of the contents. Do all <code>import</code>s right after the header,
without a line break, on separate lines.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm"></span>
<span class="cm">Copyright (c) 2015 Joe Cool. All rights reserved.</span>
<span class="cm">Released under Apache 2.0 license as described in the file LICENSE.</span>
<span class="cm">Author: Joe Cool.</span>
<span class="cm">-/</span>
<span class="kn">import</span> <span class="n">data.nat</span>
<span class="kn">import</span> <span class="n">algebra.group</span>
</code></pre></div>
</div>

<p>(Tip: If you&#x27;re editing mathlib in VS Code, you can write <code>copy</code>
and then press <kbd>TAB</kbd> to generate a skeleton of the copyright header.)</p>
<p>Regarding the list of authors: we don&#x27;t have strict rules on what
contributions qualify for inclusion there. The general idea is that
the people listed there should be the ones we would reach out to if we had
questions about the design or development of the Lean code.</p>
<h3 id="module-docstrings" class="markdown-heading">Module docstrings <a class="hover-link" href="#module-docstrings">#</a></h3>
<p>After the copyright header and the imports,
please add a module docstring (delimited with <code>/-!</code> and <code>-/</code>) containing</p>
<ul>
<li>a title of the file,</li>
<li>a summary of the contents (the main definitions and theorems, proof techniques, etc‚Ä¶)</li>
<li>notation that has been used in the file (if any)</li>
<li>references to the literature (if any)</li>
</ul>
<p>In total, the module docstring should look something like this:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code>/-!
<span class="gh"># Foos and bars</span>

In this file we introduce <span class="sb">`foo`</span> and <span class="sb">`bar`</span>,
two main concepts in the theory of xyzzyology.

<span class="gu">## Main results</span>

<span class="k">-</span> <span class="sb">`exists_foo`</span>: the main existence theorem of <span class="sb">`foo`</span>s.
<span class="k">-</span> <span class="sb">`bar_of_foo`</span>: a construction of a <span class="sb">`bar`</span>, given a <span class="sb">`foo`</span>.
<span class="k">-</span> <span class="sb">`bar_eq`</span>    : the main classification theorem of <span class="sb">`bar`</span>s.

<span class="gu">## Notation</span>

 <span class="k">-</span> <span class="sb">`|_|`</span> : The barrification operator, see <span class="sb">`bar_of_foo`</span>.

<span class="gu">## References</span>

See [Thales600BC] for the original account on Xyzzyology.
-/
</code></pre></div>
</div>

<p>New bibliography entries should be added to <code>docs/references.bib</code>.</p>
<p>See our <a href="doc.html">documentation requirements</a> for more suggestions and examples.</p>
<h3 id="structuring-definitions-and-theorems" class="markdown-heading">Structuring definitions and theorems <a class="hover-link" href="#structuring-definitions-and-theorems">#</a></h3>
<p>These guidelines hold for declarations starting with <code>def</code>, <code>lemma</code> and <code>theorem</code>. For &quot;theorem statement&quot;, also read &quot;type of a definition&quot; and for &quot;proof&quot; also read &quot;definition body&quot;.</p>
<p>Use spaces around &quot;:&quot;, &quot;:=&quot; or infix operators. Put them before a line break rather
than at the beginning of the next line.</p>
<p>Use two spaces to indent.</p>
<p>After stating the theorem, we generally do not indent the first line
of a proof, so that the proof is &quot;flush left&quot; in the file.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kn">open</span> <span class="n">nat</span>
<span class="kd">theorem</span> <span class="n">nat_case</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">‚Üí</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">H1</span> <span class="o">:</span> <span class="n">P</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">H2</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">m</span><span class="o">,</span> <span class="n">P</span> <span class="o">(</span><span class="n">succ</span> <span class="n">m</span><span class="o">))</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span> <span class="o">:=</span>
<span class="n">nat.induction_on</span> <span class="n">n</span> <span class="n">H1</span> <span class="o">(</span><span class="k">assume</span> <span class="n">m</span> <span class="n">IH</span><span class="o">,</span> <span class="n">H2</span> <span class="n">m</span><span class="o">)</span>
</code></pre></div>
</div>

<p>If the theorem statement requires multiple lines, indent the subsequent lines:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kn">namespace</span> <span class="n">nat</span>

<span class="kd">lemma</span> <span class="n">le_induction</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">‚Ñï</span> <span class="bp">‚Üí</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">m</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">P</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">n</span><span class="o">,</span> <span class="n">m</span> <span class="bp">‚â§</span> <span class="n">n</span> <span class="bp">‚Üí</span> <span class="n">P</span> <span class="n">n</span> <span class="bp">‚Üí</span> <span class="n">P</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span>
  <span class="bp">‚àÄ</span> <span class="n">n</span><span class="o">,</span> <span class="n">m</span> <span class="bp">‚â§</span> <span class="n">n</span> <span class="bp">‚Üí</span> <span class="n">P</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">apply</span> <span class="n">nat.less_than_or_equal.rec</span> <span class="n">h0</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h1</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">decreasing_induction</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">‚Ñï</span> <span class="bp">‚Üí</span> <span class="kt">Sort</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">n</span><span class="o">,</span> <span class="n">P</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">‚Üí</span> <span class="n">P</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">}</span> <span class="o">(</span><span class="n">mn</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">‚â§</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hP</span> <span class="o">:</span> <span class="n">P</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">P</span> <span class="n">m</span> <span class="o">:=</span>
<span class="n">le_rec_on</span> <span class="n">mn</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">k</span> <span class="n">ih</span> <span class="n">hsk</span><span class="o">,</span> <span class="n">ih</span> <span class="bp">$</span> <span class="n">h</span> <span class="n">k</span> <span class="n">hsk</span><span class="o">)</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">h</span><span class="o">,</span> <span class="n">h</span><span class="o">)</span> <span class="n">hP</span>

<span class="kd">end</span> <span class="n">nat</span>
</code></pre></div>
</div>

<p>When a proof term takes multiple arguments, it is sometimes clearer, and often
necessary, to put some of the arguments on subsequent lines. In that case,
indent each argument.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kn">open</span> <span class="n">nat</span>
<span class="kd">axiom</span> <span class="n">zero_or_succ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">zero</span> <span class="bp">‚à®</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">pred</span> <span class="n">n</span><span class="o">)</span>
<span class="kd">theorem</span> <span class="n">nat_discriminate</span> <span class="o">{</span><span class="n">B</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">(</span><span class="n">H1</span><span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">‚Üí</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">H2</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">m</span><span class="o">,</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">m</span> <span class="bp">‚Üí</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">B</span> <span class="o">:=</span>
<span class="n">or.elim</span> <span class="o">(</span><span class="n">zero_or_succ</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">zero</span><span class="o">,</span> <span class="n">H1</span> <span class="n">H3</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">pred</span> <span class="n">n</span><span class="o">),</span> <span class="n">H2</span> <span class="o">(</span><span class="n">pred</span> <span class="n">n</span><span class="o">)</span> <span class="n">H3</span><span class="o">)</span>
</code></pre></div>
</div>

<p>Don&#x27;t orphan parentheses; keep them with their arguments.</p>
<p>Here is a longer example.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kn">open</span> <span class="n">list</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">T</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>

<span class="kd">theorem</span> <span class="n">mem_split</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">T</span><span class="o">}</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">‚àà</span> <span class="n">l</span> <span class="bp">‚Üí</span> <span class="bp">‚àÉ</span> <span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">,</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">::</span><span class="n">t</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">list.rec_on</span> <span class="n">l</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">‚àà</span> <span class="o">[],</span> <span class="n">false.elim</span> <span class="o">(</span><span class="n">iff.elim_left</span> <span class="o">(</span><span class="n">mem_nil_iff</span> <span class="n">_</span><span class="o">)</span> <span class="n">H</span><span class="o">))</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">y</span> <span class="n">l</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">IH</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">‚àà</span> <span class="n">l</span> <span class="bp">‚Üí</span> <span class="bp">‚àÉ</span> <span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">,</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">::</span><span class="n">t</span><span class="o">),</span>
    <span class="k">assume</span> <span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">‚àà</span> <span class="n">y</span><span class="o">::</span><span class="n">l</span><span class="o">,</span>
    <span class="n">or.elim</span> <span class="o">(</span><span class="n">eq_or_mem_of_mem_cons</span> <span class="n">H</span><span class="o">)</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">H1</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
        <span class="n">exists.intro</span> <span class="o">[]</span> <span class="o">(</span><span class="n">exists.intro</span> <span class="n">l</span> <span class="o">(</span><span class="kd">by</span> <span class="n">rw</span> <span class="n">H1</span><span class="bp">;</span> <span class="n">refl</span><span class="o">)))</span>
      <span class="o">(</span><span class="k">assume</span> <span class="n">H1</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">‚àà</span> <span class="n">l</span><span class="o">,</span>
        <span class="k">let</span> <span class="o">‚ü®</span><span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="n">H2</span> <span class="o">:</span> <span class="bp">‚àÉ</span> <span class="n">t</span> <span class="o">:</span> <span class="n">list</span> <span class="n">T</span><span class="o">,</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">::</span><span class="n">t</span><span class="o">))‚ü©</span> <span class="o">:=</span> <span class="n">IH</span> <span class="n">H1</span><span class="o">,</span>
            <span class="o">‚ü®</span><span class="n">t</span><span class="o">,</span> <span class="o">(</span><span class="n">H3</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">::</span><span class="n">t</span><span class="o">))‚ü©</span> <span class="o">:=</span> <span class="n">H2</span> <span class="k">in</span>
        <span class="k">have</span> <span class="n">H4</span> <span class="o">:</span> <span class="n">y</span> <span class="o">::</span> <span class="n">l</span> <span class="bp">=</span> <span class="o">(</span><span class="n">y</span><span class="o">::</span><span class="n">s</span><span class="o">)</span> <span class="bp">++</span> <span class="o">(</span><span class="n">x</span><span class="o">::</span><span class="n">t</span><span class="o">),</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">H3</span><span class="bp">;</span> <span class="n">refl</span><span class="o">,</span>
        <span class="n">exists.intro</span> <span class="o">(</span><span class="n">y</span><span class="o">::</span><span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">exists.intro</span> <span class="n">t</span> <span class="n">H4</span><span class="o">)))</span>
</code></pre></div>
</div>

<p>A short declaration can be written on a single line:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kn">open</span> <span class="n">nat</span>
<span class="kd">lemma</span> <span class="n">succ_pos</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">succ</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">zero_lt_succ</span>

<span class="kd">def</span> <span class="n">square</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">nat</span> <span class="o">:=</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span>
</code></pre></div>
</div>

<p>A &quot;have&quot; / &quot;from&quot; pair can be put on the same line.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">‚â†</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span> <span class="n">subst</span> <span class="o">(</span><span class="n">ne_symm</span> <span class="o">(</span><span class="n">succ_ne_zero</span> <span class="n">k</span><span class="o">))</span> <span class="o">(</span><span class="n">symm</span> <span class="n">H</span><span class="o">),</span>
<span class="o">[</span><span class="bp">...</span><span class="o">]</span>
</code></pre></div>
</div>

<p>You can also put it on the next line, if the justification is long.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">‚â†</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span>
  <span class="k">from</span> <span class="n">subst</span> <span class="o">(</span><span class="n">ne_symm</span> <span class="o">(</span><span class="n">succ_ne_zero</span> <span class="n">k</span><span class="o">))</span> <span class="o">(</span><span class="n">symm</span> <span class="n">H</span><span class="o">),</span>
<span class="o">[</span><span class="bp">...</span><span class="o">]</span>
</code></pre></div>
</div>

<p>If the justification takes more than a single line, keep the &quot;from&quot; on the same
line as the &quot;have&quot;, and then begin the justification indented on the next line.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="k">have</span> <span class="n">n</span> <span class="bp">‚â†</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span>
  <span class="n">not_intro</span>
    <span class="o">(</span><span class="k">assume</span> <span class="n">H4</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">H5</span> <span class="o">:</span> <span class="n">succ</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span> <span class="n">trans</span> <span class="o">(</span><span class="n">symm</span> <span class="n">H</span><span class="o">)</span> <span class="n">H4</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">H6</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">=</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span> <span class="n">succ_inj</span> <span class="n">H5</span><span class="o">,</span>
      <span class="n">absurd</span> <span class="n">H6</span> <span class="n">H2</span><span class="o">)))),</span>
<span class="o">[</span><span class="bp">...</span><span class="o">]</span>
</code></pre></div>
</div>

<p>When the arguments themselves are long enough to require line breaks, use
an additional indent for every line after the first, as in the following
example:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kn">open</span> <span class="n">nat</span> <span class="n">eq</span> <span class="n">algebra</span>
<span class="kd">theorem</span> <span class="n">add_right_inj</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span> <span class="n">k</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span> <span class="bp">‚Üí</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">k</span> <span class="o">:=</span>
<span class="n">nat.rec_on</span> <span class="n">n</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">H</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">k</span><span class="o">,</span>
    <span class="k">calc</span>
        <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:</span> <span class="n">eq.symm</span> <span class="o">(</span><span class="n">zero_add</span> <span class="n">m</span><span class="o">)</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">k</span> <span class="o">:</span> <span class="n">H</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">k</span>     <span class="o">:</span> <span class="n">zero_add</span> <span class="n">_</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">IH</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span> <span class="bp">‚Üí</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">k</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span>
    <span class="k">have</span> <span class="n">H2</span> <span class="o">:</span> <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">),</span> <span class="k">from</span>
      <span class="k">calc</span>
        <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span>   <span class="o">:</span> <span class="n">eq.symm</span> <span class="o">(</span><span class="n">succ_add</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span>
                 <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span>   <span class="o">:</span> <span class="n">H</span>
                 <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="n">succ_add</span> <span class="n">n</span> <span class="n">k</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">H3</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">k</span><span class="o">,</span> <span class="k">from</span> <span class="n">succ.inj</span> <span class="n">H2</span><span class="o">,</span>
    <span class="n">IH</span> <span class="n">H3</span><span class="o">)</span>
</code></pre></div>
</div>

<p>In a class or structure definition, we do not indent fields, as in:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">structure</span> <span class="n">principal_seg</span> <span class="o">{</span><span class="n">Œ±</span> <span class="n">Œ≤</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="n">Œ±</span> <span class="bp">‚Üí</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Œ≤</span> <span class="bp">‚Üí</span> <span class="n">Œ≤</span> <span class="bp">‚Üí</span> <span class="kt">Prop</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">r</span> <span class="bp">‚âº</span><span class="n">o</span> <span class="n">s</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">top</span> <span class="o">:</span> <span class="n">Œ≤</span><span class="o">)</span>
<span class="o">(</span><span class="n">down</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">b</span><span class="o">,</span> <span class="n">s</span> <span class="n">b</span> <span class="n">top</span> <span class="bp">‚Üî</span> <span class="bp">‚àÉ</span> <span class="n">a</span><span class="o">,</span> <span class="n">to_order_embedding</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">semimodule</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span>
  <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">distrib_mul_action</span> <span class="n">R</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">add_smul</span>  <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="o">(</span><span class="n">r</span> <span class="bp">+</span> <span class="n">s</span><span class="o">)</span> <span class="bp">‚Ä¢</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">‚Ä¢</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">s</span> <span class="bp">‚Ä¢</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">zero_smul</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">,</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="bp">‚Ä¢</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
</code></pre></div>
</div>

<p>When using a constructor taking several arguments in a definition,
arguments line up, as in:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">theorem</span> <span class="n">sub_eq_zero_iff_le</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ordinal</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">‚Üî</span> <span class="n">a</span> <span class="bp">‚â§</span> <span class="n">b</span> <span class="o">:=</span>
<span class="o">‚ü®</span><span class="bp">Œª</span> <span class="n">h</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="n">using</span> <span class="n">le_add_sub</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
 <span class="bp">Œª</span> <span class="n">h</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="bp">‚Üê</span> <span class="n">le_zero</span><span class="o">,</span> <span class="n">sub_le</span><span class="o">,</span> <span class="n">add_zero</span><span class="o">]‚ü©</span>
</code></pre></div>
</div>

<p>When defining instances, opening and closing braces are not alone on
their line. The content is indented by two spaces and <code>:=</code> line up, as
in:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">partial_order</span> <span class="o">(</span><span class="n">topological_space</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">le</span>          <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">t</span> <span class="n">s</span><span class="o">,</span> <span class="n">t.is_open</span> <span class="bp">‚â§</span> <span class="n">s.is_open</span><span class="o">,</span>
  <span class="n">le_antisymm</span> <span class="o">:=</span> <span class="k">assume</span> <span class="n">t</span> <span class="n">s</span> <span class="n">h‚ÇÅ</span> <span class="n">h‚ÇÇ</span><span class="o">,</span> <span class="n">topological_space_eq</span> <span class="bp">$</span> <span class="n">le_antisymm</span> <span class="n">h‚ÇÅ</span> <span class="n">h‚ÇÇ</span><span class="o">,</span>
  <span class="n">le_refl</span>     <span class="o">:=</span> <span class="k">assume</span> <span class="n">t</span><span class="o">,</span> <span class="n">le_refl</span> <span class="n">t.is_open</span><span class="o">,</span>
  <span class="n">le_trans</span>    <span class="o">:=</span> <span class="k">assume</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">h‚ÇÅ</span> <span class="n">h‚ÇÇ</span><span class="o">,</span> <span class="bp">@</span><span class="n">le_trans</span> <span class="n">_</span> <span class="n">_</span> <span class="n">a.is_open</span> <span class="n">b.is_open</span> <span class="n">c.is_open</span> <span class="n">h‚ÇÅ</span> <span class="n">h‚ÇÇ</span> <span class="o">}</span>
</code></pre></div>
</div>

<h3 id="hypotheses-left-of-colon" class="markdown-heading">Hypotheses Left of Colon <a class="hover-link" href="#hypotheses-left-of-colon">#</a></h3>
<p>Generally, having arguments to the left of the colon is preferred
over having arguments in universal quantifiers or implications,
if the proof starts by introducing these variables. For instance:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span>
</code></pre></div>
</div>

<p>is preferred over</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">‚Üí</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">h</span><span class="o">,</span> <span class="kd">by</span> <span class="n">linarith</span>
</code></pre></div>
</div>

<p>and</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">‚â§</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</code></pre></div>
</div>

<p>is preferred over</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">),</span> <span class="mi">0</span> <span class="bp">‚â§</span> <span class="n">n</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">n</span><span class="o">,</span> <span class="n">dec_trivial</span>
</code></pre></div>
</div>

<h3 id="binders" class="markdown-heading">Binders <a class="hover-link" href="#binders">#</a></h3>
<p>Use a space after binders:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">,</span> <span class="bp">‚àÄ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">Œ±</span><span class="o">,</span> <span class="bp">‚àÉ</span> <span class="n">y</span><span class="o">,</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="bp">Œª</span> <span class="o">(</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Œ±</span><span class="o">),</span> <span class="n">exists.intro</span> <span class="n">x</span> <span class="n">rfl</span>
</code></pre></div>
</div>

<h3 id="calculations" class="markdown-heading">Calculations <a class="hover-link" href="#calculations">#</a></h3>
<p>There is some flexibility in how you write calculational proofs. In
general, it looks nice when the comparisons and justifications line up
neatly:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data.list</span>
<span class="kn">open</span> <span class="n">list</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>

<span class="kd">theorem</span> <span class="n">reverse_reverse</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">Œ±</span><span class="o">),</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="bp">=</span> <span class="n">l</span>
<span class="bp">|</span> <span class="o">[]</span>       <span class="o">:=</span> <span class="n">rfl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span> <span class="o">::</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="k">calc</span>
    <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="o">(</span><span class="n">a</span> <span class="o">::</span> <span class="n">l</span><span class="o">))</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">concat</span> <span class="n">a</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">))</span>     <span class="o">:</span> <span class="n">rfl</span>
                           <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span> <span class="bp">++</span> <span class="o">[</span><span class="n">a</span><span class="o">])</span>         <span class="o">:</span> <span class="n">concat_eq_append</span>
                           <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">++</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="o">:</span> <span class="n">reverse_append</span>
                           <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">++</span> <span class="n">l</span>                   <span class="o">:</span> <span class="n">reverse_reverse</span>
                           <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">::</span> <span class="n">l</span>                             <span class="o">:</span> <span class="n">rfl</span>
</code></pre></div>
</div>

<p>To be more compact, for example, you may do this only after the first line:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data.list</span>
<span class="kn">open</span> <span class="n">list</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">Œ±</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>

<span class="kd">theorem</span> <span class="n">reverse_reverse</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">Œ±</span><span class="o">),</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="bp">=</span> <span class="n">l</span>
<span class="bp">|</span> <span class="o">[]</span>       <span class="o">:=</span> <span class="n">rfl</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span> <span class="o">::</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="k">calc</span>
    <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="o">(</span><span class="n">a</span> <span class="o">::</span> <span class="n">l</span><span class="o">))</span>
          <span class="bp">=</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">concat</span> <span class="n">a</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">))</span>     <span class="o">:</span> <span class="n">rfl</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span> <span class="bp">++</span> <span class="o">[</span><span class="n">a</span><span class="o">])</span>         <span class="o">:</span> <span class="n">concat_eq_append</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">++</span> <span class="n">reverse</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="o">:</span> <span class="n">reverse_append</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">reverse</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">++</span> <span class="n">l</span>                   <span class="o">:</span> <span class="n">reverse_reverse</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">::</span> <span class="n">l</span>                             <span class="o">:</span> <span class="n">rfl</span>
</code></pre></div>
</div>

<h3 id="tactic-mode" class="markdown-heading">Tactic mode <a class="hover-link" href="#tactic-mode">#</a></h3>
<p>When opening a tactic block, <code>begin</code> is not indented but everything
inside is indented, as in:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">lemma</span> <span class="n">div_self</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">Œ±</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">‚â†</span> <span class="mi">0</span> <span class="bp">‚Üí</span> <span class="n">a</span> <span class="bp">/</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">Œ±</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">hna</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">wit_aa</span> <span class="o">:=</span> <span class="n">quotient_mul_add_remainder_eq</span> <span class="n">a</span> <span class="n">a</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">a_mod_a</span> <span class="o">:=</span> <span class="n">mod_self</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">dsimp</span> <span class="o">[(</span><span class="bp">%</span><span class="o">)]</span> <span class="n">at</span> <span class="n">a_mod_a</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">a_mod_a</span><span class="o">]</span> <span class="n">at</span> <span class="n">wit_aa</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">,</span> <span class="k">from</span> <span class="n">one_mul</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">conv</span> <span class="n">at</span> <span class="n">wit_aa</span> <span class="o">{</span><span class="n">for</span> <span class="n">a</span> <span class="o">[</span><span class="mi">4</span><span class="o">]</span> <span class="o">{</span><span class="n">rw</span> <span class="bp">‚Üê</span><span class="n">h1</span><span class="o">}},</span>
  <span class="n">exact</span> <span class="n">eq_of_mul_eq_mul_right</span> <span class="n">hna</span> <span class="n">wit_aa</span>
<span class="kd">end</span>
</code></pre></div>
</div>

<p>A more complicated example, mixing term mode and tactic mode:</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">lemma</span> <span class="n">nhds_supr</span> <span class="o">{</span><span class="n">Œπ</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">w</span><span class="o">}</span> <span class="o">{</span><span class="n">t</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">topological_space</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">nhds</span> <span class="n">Œ±</span> <span class="o">(</span><span class="n">supr</span> <span class="n">t</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">‚®Ö</span><span class="n">i</span><span class="o">,</span> <span class="bp">@</span><span class="n">nhds</span> <span class="n">Œ±</span> <span class="o">(</span><span class="n">t</span> <span class="n">i</span><span class="o">)</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">le_antisymm</span>
  <span class="o">(</span><span class="n">le_infi</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">i</span><span class="o">,</span> <span class="n">nhds_mono</span> <span class="bp">$</span> <span class="n">le_supr</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span>
  <span class="kd">begin</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">supr_eq_generate_from</span><span class="o">,</span> <span class="n">nhds_generate_from</span><span class="o">],</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">le_infi</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">s</span><span class="o">,</span> <span class="n">le_infi</span> <span class="bp">$</span> <span class="k">assume</span> <span class="o">‚ü®</span><span class="n">hs</span><span class="o">,</span> <span class="n">hi</span><span class="o">‚ü©,</span>
      <span class="kd">begin</span>
        <span class="n">simp</span> <span class="n">at</span> <span class="n">hi</span><span class="o">,</span> <span class="n">cases</span> <span class="n">hi</span> <span class="k">with</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span>
        <span class="n">exact</span> <span class="o">(</span><span class="n">infi_le_of_le</span> <span class="n">i</span> <span class="bp">$</span> <span class="n">le_principal_iff.mpr</span> <span class="bp">$</span> <span class="bp">@</span><span class="n">mem_nhds_sets</span> <span class="n">Œ±</span> <span class="o">(</span><span class="n">t</span> <span class="n">i</span><span class="o">)</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hi</span> <span class="n">hs</span><span class="o">)</span>
      <span class="kd">end</span><span class="o">)</span>
  <span class="kd">end</span>
</code></pre></div>
</div>

<p>When new goals arise as side conditions or steps, they are enclosed in
focussing braces and indented (except possibly the last goal, if its proof
is much longer than the proofs of the other goals). Braces are not alone on their line.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">lemma</span> <span class="n">mem_nhds_of_is_topological_basis</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Œ±</span><span class="o">}</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">Œ±</span><span class="o">)}</span>
  <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">is_topological_basis</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">‚àà</span> <span class="o">(</span><span class="bp">ùìù</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">sets</span> <span class="bp">‚Üî</span> <span class="bp">‚àÉ</span> <span class="n">t</span> <span class="bp">‚àà</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">‚àà</span> <span class="n">t</span> <span class="bp">‚àß</span> <span class="n">t</span> <span class="bp">‚äÜ</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">hb.2.2</span><span class="o">,</span> <span class="n">nhds_generate_from</span><span class="o">,</span> <span class="n">infi_sets_eq&#39;</span><span class="o">],</span>
  <span class="o">{</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">and_comm</span><span class="o">,</span> <span class="n">and.left_comm</span><span class="o">]</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="k">assume</span> <span class="n">s</span> <span class="o">‚ü®</span><span class="n">hs‚ÇÅ</span><span class="o">,</span> <span class="n">hs‚ÇÇ</span><span class="o">‚ü©</span> <span class="n">t</span> <span class="o">‚ü®</span><span class="n">ht‚ÇÅ</span><span class="o">,</span> <span class="n">ht‚ÇÇ</span><span class="o">‚ü©,</span>
      <span class="k">have</span> <span class="n">a</span> <span class="bp">‚àà</span> <span class="n">s</span> <span class="bp">‚à©</span> <span class="n">t</span><span class="o">,</span> <span class="k">from</span> <span class="o">‚ü®</span><span class="n">hs‚ÇÅ</span><span class="o">,</span> <span class="n">ht‚ÇÅ</span><span class="o">‚ü©,</span>
      <span class="k">let</span> <span class="o">‚ü®</span><span class="n">u</span><span class="o">,</span> <span class="n">hu‚ÇÅ</span><span class="o">,</span> <span class="n">hu‚ÇÇ</span><span class="o">,</span> <span class="n">hu‚ÇÉ</span><span class="o">‚ü©</span> <span class="o">:=</span> <span class="n">hb.1</span> <span class="n">_</span> <span class="n">hs‚ÇÇ</span> <span class="n">_</span> <span class="n">ht‚ÇÇ</span> <span class="n">_</span> <span class="n">this</span> <span class="k">in</span>
      <span class="o">‚ü®</span><span class="n">u</span><span class="o">,</span> <span class="o">‚ü®</span><span class="n">hu‚ÇÇ</span><span class="o">,</span> <span class="n">hu‚ÇÅ</span><span class="o">‚ü©,</span> <span class="kd">by</span> <span class="n">simpa</span> <span class="n">using</span> <span class="n">hu‚ÇÉ</span><span class="o">‚ü©</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">suffices</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">‚àà</span> <span class="o">(</span><span class="bp">‚ãÉ‚ÇÄ</span> <span class="n">b</span><span class="o">),</span> <span class="o">{</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">and_comm</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hb.2.1</span><span class="o">],</span> <span class="n">trivial</span> <span class="o">}</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
</div>

<p>The final step in a <code>begin ... end</code> block may be followed by comma,
but there is no style rule requiring it.
(Many authors prefer the comma, so that placing the cursor after it displays &quot;goals accomplished&quot;
in the infoview, but others dislike it on the basis of the disconcerting grammar.)</p>
<p>Often <code>t0; t1</code> is used to execute <code>t0</code> and then <code>t1</code> on all new goals. But <code>;</code> is not a <code>,</code> so
either write the tactics in one line, or indent the following tacic.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>
</div>

<p>For single line tactic proofs (or short tactic proofs embedded in a term),
it is preferable to use <code>by ...</code> rather than <code>begin ... end</code>.</p>
<p>If you are using multiple tactics inside a <code>by ...</code> block, use braces
<code>by { tac1, tac2 }</code> rather than abusing the <code>;</code> operator <code>by tac1; tac2</code>,
which should only be used when multiple goals need to be processed by <code>tac2</code>.
(This style rule is not yet followed in the older parts of mathlib.)</p>
<p>In general, you should put a single tactic invocation per line, unless you are
closing a goal with a proof that fits entirely on a single line. Short sequences of
tactics that correspond to a single mathematical idea can also be put on a single line,
as in <code>cases bla, clear h</code> or <code>induction n, { simp }</code> or <code>rw [foo], simp_rw [bar]</code>.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">begin</span>
  <span class="n">by_cases</span> <span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hzero</span> <span class="n">ha</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h&#39;</span> <span class="o">:</span> <span class="bp">...</span><span class="o">,</span> <span class="k">from</span> <span class="n">H</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">simp_rw</span> <span class="o">[</span><span class="n">h&#39;</span><span class="o">,</span> <span class="n">hb</span><span class="o">],</span>
    <span class="bp">...</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
</div>

<p>Very short goals can be closed right away using <code>swap</code> or <code>work_on_goal</code> if needed, to avoid
additional indentation in the rest of the proof.</p>
<div class="codehilite"><div class="codehilite"><pre><span></span><code><span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">],</span> <span class="n">swap</span><span class="o">,</span> <span class="o">{</span> <span class="n">exact</span> <span class="n">h&#39;</span> <span class="o">},</span>
  <span class="bp">...</span> 
<span class="kd">end</span>
</code></pre></div>
</div>

<p>We generally use a blank line to separate theorems and definitions,
but this can be omitted, for example, to group together a number of
short definitions, or to group together a definition and notation.</p>
<h3 id="normal-forms" class="markdown-heading">Normal forms <a class="hover-link" href="#normal-forms">#</a></h3>
<p>Some statements are equivalent. For instance, there are several equivalent
ways to require that a subset <code>s</code> of a type is nonempty. For another example, given
<code>a : Œ±</code>, the corresponding element of <code>option Œ±</code> can be equivalently written
as <code>some a</code> or <code>(a : option Œ±)</code>. In general, we try to settle
on one standard form, called the normal form, and use it both in statements and
conclusions of theorems. In the above examples, this would be <code>s.nonempty</code> (which
gives access to dot notation) and <code>(a : option Œ±)</code>. Often, simp lemmas will be
registered to convert the other equivalent forms to the normal form.</p>
<p>There is a special case to this rule. In types with a bottom element, it is equivalent
to require <code>hlt : ‚ä• &lt; x</code> or <code>hne : x ‚â† ‚ä•</code>, and it is not clear which one would
be better as a normal form since both have their pros and cons. An analogous situation
occurs with <code>hlt : x &lt; ‚ä§</code> and <code>hne : x ‚â† ‚ä§</code> in types with a top element. Since it is very
easy to convert from <code>hlt</code> to <code>hne</code> (by using <code>hlt.ne</code> or <code>hlt.ne&#x27;</code> depending
on the direction we want) while the other conversion is more lengthy, we use <code>hne</code> in
<em>assumptions</em> of theorems (as this is the easier assumption to check), and <code>hlt</code> in
<em>conclusions</em> of theorems (as this is the more powerful result to use).
A common usage of this rule is with naturals, where <code>‚ä• = 0</code>.</p>
<h2 id="comments" class="markdown-heading">Comments <a class="hover-link" href="#comments">#</a></h2>
<p>Use module doc delimiters <code>/-! -/</code> to provide section headers and
separators since these get incorporated into the auto-generated docs,
and use <code>/- -/</code> for more technical comments (e.g. TODOs and
implementation notes) or for comments in proofs.
Use <code>--</code> for short or in-line comments.</p>
<p>Documentation strings for declarations are delimited with <code>/-- -/</code>.</p>
<p>See our <a href="doc.html">documentation requirements</a> for more suggestions
and examples.</p>
<hr />
<p>Copyright (c) 2016 Jeremy Avigad. All rights reserved.
Released under Apache 2.0 license as described in the file LICENSE.
Authors: Jeremy Avigad</p>

  </main>

    <nav id="navbar" class="d-md-block bg-light sidebar collapse navbar-light pb-4">
      <div class="d-none d-md-block mt-4"><a class="navbar-brand" href="https://leanprover-community.github.io/index.html">Lean Community</a></div>
      
        <h6 class="sidebar-heading mt-4">Community</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover.zulipchat.com/">Zulip chat</a></li>
        
          <li class="nav-item col-12"><a href="https://github.com/leanprover-community/mathlib">GitHub</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/blog">Blog</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/meet.html">Community information</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/papers.html">Papers about Lean</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/lean_projects.html">Projects using Lean</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/events.html">Events</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Installation</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/get_started.html">Get started</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/install/debian.html">Debian/Ubuntu installation</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/install/linux.html">Generic Linux installation</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/install/macos.html">MacOS installation</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/install/windows.html">Windows installation</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/lean-web-editor">Online version (no installation)</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/leanproject.html">Using leanproject</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/toolchain.html">The Lean toolchain</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Documentation</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/learn.html">Learning resources (start here)</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib_docs">API documentation</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/calc.html">Calc mode</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/conv.html">Conv mode</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/simp.html">Simplifier</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/tactic_writing.html">Tactic writing tutorial</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/extras/well_founded_recursion.html">Well-founded recursion</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mwe.html">About MWEs</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/glossary.html">Glossary</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/tips_and_tricks.html">Tips and tricks</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Library overviews</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib-overview.html">Library overview</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/undergrad.html">Undergraduate maths</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/100.html">Wiedijk's 100 theorems</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Theory docs</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/category_theory.html">Category theory</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/linear_algebra.html">Linear algebra</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/naturals.html">Natural numbers</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/sets.html">Sets and set-like objects</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/theories/topology.html">Topology</a></li>
        </ul>
      
        <h6 class="sidebar-heading mt-4">Contributing</h6>
        <ul class="nav">
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/index.html">Pull request lifecycle</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/naming.html">Naming conventions</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/style.html">Code style guideline</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/contribute/doc.html">Documentation style</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/ci.html">CI for 3rd party projects</a></li>
        
          <li class="nav-item col-12"><a href="https://leanprover-community.github.io/mathlib_stats.html">Contribution statistics</a></li>
        </ul>
      
    </nav>

</div>


  <nav class="footer navbar navbar-expand-lg navbar-light bg-light justify-content-end">
  <ul class="nav">
    <li class="nav-item">
      <a class="nav-link active" href="https://github.com/leanprover-community/leanprover-community.github.io/blob/newsite/templates/contribute/style.md">Suggest edits to this page on GitHub</a>
    </li>
  </ul>
  </nav>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"></script>
    <script src="https://leanprover-community.github.io//js/bootstrap.min.js"></script>
    
  </body>
</html>